<!doctype html>

<head>
	<meta charset="UTF-8" />
	<title>@根啊根@riyue.me</title>
	<link rel="stylesheet" href="../../lib/gen.css" />
	<script src="../../lib/jquery.js"></script>
	<script src="../../lib/gen.js"></script>
	<style>
		.wrap {
		            margin: 0 auto;
		            width: 800px;
		            border: 1px solid;
		            height: 1000px;
		        }
	</style>

</head>

<body>

	<script type="text/javascript" charset="utf-8">
		var  Events = function() {
		        var listen, log, obj, one, remove, trigger, __this;
		        obj = {};
		        __this = this;
		        listen = function( key, eventfn ) {
		        var stack, _ref;
		        stack = ( _ref = obj[key] ) != null ? _ref : obj[ key ] = [];
		        return stack.push( eventfn );
		        };
		        one = function( key, eventfn ) {
		        remove( key );
		        return listen( key, eventfn );
		        };
		        remove = function( key ) {
		        var _ref;
		        return ( _ref = obj[key] ) != null ? _ref.length = 0 : void 0;
		        };
		        trigger = function() {  //面试官打电话通知面试者
		        var fn, stack, _i, _len, _ref, key;
		        key = Array.prototype.shift.call( arguments );
		        stack = ( _ref = obj[ key ] ) != null ? _ref : obj[ key ] = [];
		        for ( _i = 0, _len = stack.length; _i < _len; _i++ ) {
		        fn = stack[ _i ];
		        if ( fn.apply( __this,  arguments ) === false) {
		        return false;
		        }
		        }
		        return {
		        listen: listen,
		        one: one,
		        remove: remove,
		        trigger: trigger
		        }
		        }
	</script>

	<div class="wrap">
		<center>
			设计模式
		</center>

		<div id="name">
			<h1>观察者模式</h1>
			<ul>
				<li>
					div.onclick = function(){} 订阅了div的click事件
				</li>
				<li>
					一个对象需要监听事件，一个对象会去触发事件
				</li>
				<li></li>
				<li></li>
				<li></li>
			</ul>
		</div>

	</div>

	<script></script>

</body>

</html>