<!doctype html>

<head>
	<meta charset="UTF-8" />
	<title>@根啊根@riyue.me</title>
	<link rel="stylesheet" href="../../lib/gen.css" />
	<script src="../../lib/jquery.js"></script>
	<script src="../../lib/gen.js"></script>
	<style>
		.wrap {
		            margin: 0 auto;
		            width: 800px;
		            border: 1px solid;
		            height: 1000px;
		        }
	</style>

</head>

<body>

	<script type="text/javascript" charset="utf-8">
		var  Events = function() {
		        var listen, log, obj, one, remove, trigger, __this;
		        obj = {};
		        __this = this;
		        listen = function( key, eventfn ) {
		        var stack, _ref;
		        stack = ( _ref = obj[key] ) != null ? _ref : obj[ key ] = [];
		        return stack.push( eventfn );
		        };
		        one = function( key, eventfn ) {
		        remove( key );
		        return listen( key, eventfn );
		        };
		        remove = function( key ) {
		        var _ref;
		        return ( _ref = obj[key] ) != null ? _ref.length = 0 : void 0;
		        };
		        trigger = function() {  //面试官打电话通知面试者
		        var fn, stack, _i, _len, _ref, key;
		        key = Array.prototype.shift.call( arguments );
		        stack = ( _ref = obj[ key ] ) != null ? _ref : obj[ key ] = [];
		        for ( _i = 0, _len = stack.length; _i < _len; _i++ ) {
		        fn = stack[ _i ];
		        if ( fn.apply( __this,  arguments ) === false) {
		        return false;
		        }
		        }
		        return {
		        listen: listen,
		        one: one,
		        remove: remove,
		        trigger: trigger
		        }
		        }
				
				
				
				
				
				
				
				
				
				
				var lc={};
				lc.events={};
				lc.addEv = function(ev,func){
				  if(!(ev in this.events)){
					this.events[ev] = [];  
				  }
				  this.events[ev].push(func);
				};
				lc.triggerEv = function(ev){
				  if(ev in this.events){
					for(var i=0;i<this.events[ev].length;i++){
						this.events[ev][i]();
					}
				  }
				}
				lc.addEv('start1',function(){console.log('start1');lc.triggerEv('start2')});
				lc.addEv('start2',function(){console.log('start2');lc.triggerEv('start3')});
				lc.addEv('start3',function(){console.log('start3')});
				lc.addEv('start4',function(){console.log('start4')});
				lc.triggerEv('start1')




				
				
				
				
				
				
	</script>

	<div class="wrap">
		<center>
			设计模式
		</center>

		<div id="name">
			<h1>观察者模式</h1>
			<ul>
				<li>
					问题：当我吃饭前我要洗手，我要准备饭碗。。。。等等。然后写代码时，先来个洗手的函数，再来个准备饭碗的函数。。。。
					这样的话，问题就来了，我不知道我的准备工作有多少，我需要写多少函数，
					于是我们就想着能不能写一个事件，饭前准备，然后可以不断的添加饭前准备的函数
				</li>
				<li>
					一个对象需要监听事件，一个对象会去触发事件
				</li>
				<li>
					设计模式
				</li>
				
			</ul>
		</div>

	</div>

	<script></script>

</body>

</html>